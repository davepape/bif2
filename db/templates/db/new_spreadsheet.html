{% extends "base_generic.html" %}

{% block scripts %}
<script type="text/javascript">
function validateForm(f)
{
var fields = ["name", "description" ];
var okay = true;
for (i=0; i < fields.length; i++)
    if ((f[fields[i]].value == null) || (f[fields[i]].value == ""))
        okay = false;
if (!okay)
    {
    alert("All fields must be filled out to create the spreadsheet");
    return false;
    }
else
    return true;
}

$(document).ready(function() {
    $(".addbutton").click(function(e) {
        e.preventDefault();
        $(".formtable").append('<tr><th rowspan="2">Column</th><td> name: <input type="text" name="columnname[]" size="20" value="" /> </td></tr><tr><td>field label: <input type="text" name="propfield[]" size="20" value="" /> <em>OR</em> default value: <input type="text" name="default[]" size="20" value="" /> </td></tr>');
        });
    });
</script>
{% endblock %}

{% block content %}
<h1>Create a spreadsheet</h1>

<form method="POST" action="{% url 'db-createSpreadsheet' %}" onsubmit="return validateForm(this)">
{% csrf_token %}

<table class="formtable" cellpadding=3>
  <tr><th>Name:</th><td colspan="2"> <input type="text" name="name" size="20" value="" /> </td></tr>
  <tr><th>Description:</th><td colspan="2"> <input type="text" name="description" size="60" value="" /> </td></tr>
  <tr><th>Batch:</th>
      <td colspan="2"> <select name="batch">
{% for b in batches %}
           <option value="{{ b.id }}">{{ b.name }}</option>
{% endfor %}
           </select>
      </td></tr>
  <tr><th rowspan="2">Column</th><td> name: <input type="text" name="columnname[]" size="20" value="" /> </td></tr>
  <tr><td>field label: <input type="text" name="propfield[]" size="20" value="" /> <em>OR</em> default value: <input type="text" name="default[]" size="20" value="" /> </td></tr>
</table>
<button class="addbutton">Add column</button>

<br><br>
<input type="Submit" name="submit" value="Create" />
</p>
</form>
{% endblock %}
